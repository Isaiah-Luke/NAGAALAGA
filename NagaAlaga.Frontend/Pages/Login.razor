@page "/login"
@inject IAuthService Auth
@inject NavigationManager Nav

<h3>Sign In</h3>

<div class="form">
    <input @bind="email" placeholder="Email" />
    <input @bind="password" type="password" placeholder="Password" />

    <button @onclick="LoginClick">Sign In</button>

    @if (!string.IsNullOrEmpty(error))
    {
        <p style="color:red">@error</p>
    }
</div>

@code {
    private string email = "";
    private string password = "";
    private string? error;

    private async Task LoginClick()
    {
        var success = await Auth.SignInAsync(email, password);

        if (!success)
        {
            error = "Invalid email or password";
            return;
        }

        Nav.NavigateTo("/");
    }
}